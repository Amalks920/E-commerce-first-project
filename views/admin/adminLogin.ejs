<main>

	<section class="content-main mt-80 mb-80 mt-80" >
		<div class="card mx-auto card-login" style="margin-top: 100px;">
			<div class="card-body" style="background-color: rgb(196, 193, 193);">
				<h4 class="card-title mb-4">Log In</h4>
				<form id="loginform" action="/admin/admin-login" method="post">
					<p id="emailError" style="color: red;"><%=req.query.isValid -%></p>
					<div class="mb-3">
						<input class="form-control" id="typeEmailX" name="email" placeholder="Username or email" type="text">
					</div> <!-- form-group// -->
					<p id="passwordError" style="color: red;"></p>
					<div class="mb-3">
						<input id="typePasswordX" class="form-control" name="password" placeholder="Password" type="password">
					</div> <!-- form-group// -->
					<div class="mb-3">
						<a href="/admin/forgot-password" class="float-end font-sm">Forgot password?</a>
							<a href="/admin/admin-otp-login">Login Using OTP</a>
						</label>
					</div> <!-- form-group form-check .// -->
					<div class="mb-4">
						<button type="submit" class="btn btn-primary w-100"> Login </button>
					</div> <!-- form-group// -->
				</form>
		</div>
	</section>
</main>



<script>



// Function to validate the email
function validateEmail(email) {
    // Regular expression for email validation
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailPattern.test(email);
  }

  // Function to validate the password
  function validatePassword(password) {
    const passwordPattern=/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%]).{8,24}$/;

    return passwordPattern.test(password)
  }
  
  // Function to handle form submission
  function handleSubmit(event) {
    // Prevents the form from being submitted
  
    // Get the email input value
    const emailInput = document.getElementById("typeEmailX");
    const email = emailInput.value;
    console.log('hioasdij')
    // Get the error element
    const emailError = document.getElementById("emailError");
  
    // Validate the email
    console.log(email)
    if (email === "") {
      // Email is blank
      emailError.textContent = "Email cannot be blank.";
      event.preventDefault();
      return; // Prevent further execution
    }
    if (validateEmail(email)) {
      // Email is valid
      emailError.textContent = ""; // Clear the error message
      // Perform other form submission actions
    } else {
      // Email is invalid
      emailError.textContent = "Invalid email address!";
      event.preventDefault();
      // Prevent the form from being submitted
    }
  
    //Validation for password input
  
    const passwordInput = document.getElementById("typePasswordX");
    const password = passwordInput.value;
   
    const passwordError = document.getElementById("passwordError");

    if (password === "") {
      passwordError.textContent = "Password cannot be blank";
      event.preventDefault();
      return;
    }
    if (validatePassword(password)) {
      // Email is valid
      passwordError.textContent = ""; // Clear the error message
      // Perform other form submission actions
    } else {
      // Email is invalid
      passwordError.textContent = "Invalid password!";
      event.preventDefault();
      // Prevent the form from being submitted
    }
  }
  
  // Add event listener to form submit event
  const form = document.getElementById("loginform");
  console.log(form)
  form.addEventListener("submit", handleSubmit);
</script>